\hypertarget{classtx_auto_lock}{}\doxysection{РљР»Р°СЃСЃ tx\+Auto\+Lock}
\label{classtx_auto_lock}\index{txAutoLock@{txAutoLock}}


Класс для автоматической блокировки и разблокировки критической секции.  




{\ttfamily \#include $<$T\+X\+Lib.\+h$>$}

\doxysubsection*{РћС‚РєСЂС‹С‚С‹Рµ С‡Р»РµРЅС‹}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classtx_auto_lock_af28070ec9fc2a4466cb7dbd0868c9616}{tx\+Auto\+Lock}} (C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON $\ast$cs, bool mandatory=true)
\begin{DoxyCompactList}\small\item\em Конструктор, блокирует критическую секцию \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtx_auto_lock_acc8301ae37ef7ee9d5b9c774d27da379}{tx\+Auto\+Lock}} (bool mandatory=true)
\begin{DoxyCompactList}\small\item\em Конструктор для блокировки холста T\+X\+Lib. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtx_auto_lock_a838aae52b26597bf7aa0cd931611dca4}{$\sim$tx\+Auto\+Lock}} ()
\begin{DoxyCompactList}\small\item\em Деструктор, разблокирует секцию \end{DoxyCompactList}\item 
\mbox{\hyperlink{classtx_auto_lock_a4c6250ede5d5b2d2ad57d8254aa7c72f}{operator bool}} () const
\begin{DoxyCompactList}\small\item\em Позволяет проверить, заблокировалась секция или нет @usage См. в tx\+Auto\+Lock\+::\+Auto\+Lock (C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON\&, bool) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{РћС‚РєСЂС‹С‚С‹Рµ Р°С‚СЂРёР±СѓС‚С‹}
\begin{DoxyCompactItemize}
\item 
C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON $\ast$ \mbox{\hyperlink{classtx_auto_lock_ae7aa09749ac613c09b651a4a2e12934f}{cs\+\_\+}}
\begin{DoxyCompactList}\small\item\em Блокируемая критическая секция \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{РџРѕРґСЂРѕР±РЅРѕРµ РѕРїРёСЃР°РЅРёРµ}
Класс для автоматической блокировки и разблокировки критической секции. 

\begin{DoxyVerb}     Начиная с <a href=http://progbook.ru/2008/08/03/sovremennoe-proektirovanie-na-c-andrejj.html>
     Александреску,</a> его пишут все и он прост, как пробка: в конструкторе -- EnterCriticalSection(),
     в деструкторе -- LeaveCriticalSection(). Это @c RAII в чистом виде: вы никогда не забудете разблочить
     секцию and your thread show will always go on.

     Некоторые добавления: есть возможность вызвать TryEnterCriticalSection(), и, если она не заблочила
     секцию, деструктор ее не разблочивает. Есть оператор для проверки, заблочилась ли секция или нет
     (см. конструкторы класса и оператор @c bool).
\end{DoxyVerb}


\begin{DoxyNote}{Р—Р°РјРµС‚РєРё}
Класс не инициализирует и не удаляет критическую секцию. Только синхронизирует. Остальное сами-\/сами \+:)
\end{DoxyNote}
\begin{DoxySeeAlso}{РЎРј. С‚Р°РєР¶Рµ}
\mbox{\hyperlink{group___misc_ga532fa8a55c4f3d4f94ff0fdceae732b2}{tx\+Lock()}}, \mbox{\hyperlink{group___misc_ga8fe4ec4c66cb69ce337747fe65dd0cc6}{tx\+Unlock()}}, \mbox{\hyperlink{group___misc_gafdd807831b131ba38d5856b6ee4e8287}{tx\+G\+D\+I()}} 
\end{DoxySeeAlso}


\doxysubsection{РљРѕРЅСЃС‚СЂСѓРєС‚РѕСЂ(С‹)}
\mbox{\Hypertarget{classtx_auto_lock_af28070ec9fc2a4466cb7dbd0868c9616}\label{classtx_auto_lock_af28070ec9fc2a4466cb7dbd0868c9616}} 
\index{txAutoLock@{txAutoLock}!txAutoLock@{txAutoLock}}
\index{txAutoLock@{txAutoLock}!txAutoLock@{txAutoLock}}
\doxysubsubsection{\texorpdfstring{txAutoLock()}{txAutoLock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily tx\+Auto\+Lock\+::tx\+Auto\+Lock (\begin{DoxyParamCaption}\item[{C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON $\ast$}]{cs,  }\item[{bool}]{mandatory = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Конструктор, блокирует критическую секцию 


\begin{DoxyParams}{РђСЂРіСѓРјРµРЅС‚С‹}
{\em cs} & Критическая секция для блокировки. \\
\hline
{\em mandatory} & {\itshape Если {\ttfamily true}, то блокировать обязательно (Enter\+Critical\+Section). ~\newline
 Если {\ttfamily false}, то только пытаться блокировать (Try\+Enter\+Critical\+Section). ~\newline
 Если не указано, то блокировка обязательна.} @usage 
\begin{DoxyCode}{1}
\DoxyCodeLine{CRITICAL\_SECTION cs = \{\};         \textcolor{comment}{// This is not a Counter Strike}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} foo()}
\DoxyCodeLine{    \{}
\DoxyCodeLine{    \mbox{\hyperlink{classtx_auto_lock}{txAutoLock}} lock (\&cs);        \textcolor{comment}{// Здесь вызовется EnterCriticalSection()}}
\DoxyCodeLine{    ...}
\DoxyCodeLine{    \}                             \textcolor{comment}{// а здесь LeaveCriticalsection()}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} bar()}
\DoxyCodeLine{    \{}
\DoxyCodeLine{    \mbox{\hyperlink{classtx_auto_lock}{txAutoLock}} lock (\&cs, \textcolor{keyword}{false}); \textcolor{comment}{// TryEnterCriticalSection()}}
\DoxyCodeLine{    \textcolor{keywordflow}{if} (!lock) \textcolor{keywordflow}{return};            \textcolor{comment}{// ну не смогла    ...
    \}}}
\DoxyCodeLine{    ...}
\DoxyCodeLine{    \}}
\end{DoxyCode}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classtx_auto_lock_acc8301ae37ef7ee9d5b9c774d27da379}\label{classtx_auto_lock_acc8301ae37ef7ee9d5b9c774d27da379}} 
\index{txAutoLock@{txAutoLock}!txAutoLock@{txAutoLock}}
\index{txAutoLock@{txAutoLock}!txAutoLock@{txAutoLock}}
\doxysubsubsection{\texorpdfstring{txAutoLock()}{txAutoLock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily tx\+Auto\+Lock\+::tx\+Auto\+Lock (\begin{DoxyParamCaption}\item[{bool}]{mandatory = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Конструктор для блокировки холста T\+X\+Lib. 


\begin{DoxyParams}{РђСЂРіСѓРјРµРЅС‚С‹}
{\em mandatory} & {\itshape Если {\ttfamily true}, то блокировать {\bfseries{обязательно}}, как в \mbox{\hyperlink{group___misc_ga532fa8a55c4f3d4f94ff0fdceae732b2}{tx\+Lock}} (true). ~\newline
 Если {\ttfamily false}, то только {\bfseries{пытаться}} блокировать, как в \mbox{\hyperlink{group___misc_ga532fa8a55c4f3d4f94ff0fdceae732b2}{tx\+Lock}} (false). ~\newline
 Если не указано, то блокировка обязательна.} @usage 
\begin{DoxyCode}{1}
\DoxyCodeLine{\textcolor{keywordtype}{void} foobar()}
\DoxyCodeLine{    \{}
\DoxyCodeLine{    \mbox{\hyperlink{classtx_auto_lock}{txAutoLock}} lock;      \textcolor{comment}{// Здесь вызовется txLock()}}
\DoxyCodeLine{    ...}
\DoxyCodeLine{    \}                     \textcolor{comment}{// а здесь txUnlock()}}
\end{DoxyCode}
 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classtx_auto_lock_a838aae52b26597bf7aa0cd931611dca4}\label{classtx_auto_lock_a838aae52b26597bf7aa0cd931611dca4}} 
\index{txAutoLock@{txAutoLock}!````~txAutoLock@{$\sim$txAutoLock}}
\index{````~txAutoLock@{$\sim$txAutoLock}!txAutoLock@{txAutoLock}}
\doxysubsubsection{\texorpdfstring{$\sim$txAutoLock()}{~txAutoLock()}}
{\footnotesize\ttfamily tx\+Auto\+Lock\+::$\sim$tx\+Auto\+Lock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Деструктор, разблокирует секцию 



\doxysubsection{РњРµС‚РѕРґС‹}
\mbox{\Hypertarget{classtx_auto_lock_a4c6250ede5d5b2d2ad57d8254aa7c72f}\label{classtx_auto_lock_a4c6250ede5d5b2d2ad57d8254aa7c72f}} 
\index{txAutoLock@{txAutoLock}!operator bool@{operator bool}}
\index{operator bool@{operator bool}!txAutoLock@{txAutoLock}}
\doxysubsubsection{\texorpdfstring{operator bool()}{operator bool()}}
{\footnotesize\ttfamily tx\+Auto\+Lock\+::operator bool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Позволяет проверить, заблокировалась секция или нет @usage См. в tx\+Auto\+Lock\+::\+Auto\+Lock (C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON\&, bool) 



\doxysubsection{Р”Р°РЅРЅС‹Рµ РєР»Р°СЃСЃР°}
\mbox{\Hypertarget{classtx_auto_lock_ae7aa09749ac613c09b651a4a2e12934f}\label{classtx_auto_lock_ae7aa09749ac613c09b651a4a2e12934f}} 
\index{txAutoLock@{txAutoLock}!cs\_@{cs\_}}
\index{cs\_@{cs\_}!txAutoLock@{txAutoLock}}
\doxysubsubsection{\texorpdfstring{cs\_}{cs\_}}
{\footnotesize\ttfamily C\+R\+I\+T\+I\+C\+A\+L\+\_\+\+S\+E\+C\+T\+I\+ON$\ast$ tx\+Auto\+Lock\+::cs\+\_\+}



Блокируемая критическая секция 



РћР±СЉСЏРІР»РµРЅРёСЏ Рё РѕРїРёСЃР°РЅРёСЏ С‡Р»РµРЅРѕРІ РєР»Р°СЃСЃР° РЅР°С…РѕРґСЏС‚СЃСЏ РІ С„Р°Р№Р»Рµ\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_t_x_lib_8h}{T\+X\+Lib.\+h}}\end{DoxyCompactItemize}
